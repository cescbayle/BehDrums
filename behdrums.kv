#:kivy 2.0.0

# ------------------- HOME PAGE -------------------

<HomePage>:
    FloatLayout:
        Label:
            text: 'BehDrums'
            color: 0, 0, 0, 1  # Black color
            font_size: '70sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        Button:
            text: 'START'
            bold: True
            font_size: '80sp'
            size_hint: 0.3, 0.2
            pos_hint: {'center_x': 0.5, 'center_y': 0.3}
            on_press: root.manager.current = 'start_page'

    FloatLayout:
        Image: #HiPerCog Logo
            source: 'BehDrums/Images/hipercog_logo.jpeg'
            size_hint: None, None
            size: self.parent.width * 0.2, self.parent.height * 0.2
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'center_x': 0.5, 'top': 0.8}



# ------------------- START PAGE -------------------

<StartPage_Screen>:
    FloatLayout:
        Image: #BACK BUTTON
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'home_page'
        Button:
            text: 'NEW PARTICIPANT REGISTRATION'
            bold: True
            font_size: '20sp'
            size_hint: 0.2, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.85}
            on_press: root.manager.current = "new_participant_registration" 

        Button:
            text: 'NEW CONTROL FORM'
            bold: True
            font_size: '20sp'
            size_hint: 0.2, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.70}
            on_press: root.manager.current = "new_control_form" 

        Button:
            text: 'NEW BASELINE RECORDING'
            bold: True
            font_size: '20sp'
            size_hint: 0.2, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.55}
            on_press: root.manager.current = "new_baseline_recording" 

        Button:
            text: 'NEW TASK RECORDING A'
            bold: True
            font_size: '20sp'
            size_hint: 0.2, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.40}
            on_press: root.manager.current = "new_task_recording_a" 

        Button:
            text: 'NEW TASK RECORDING B'
            bold: True
            font_size: '20sp'
            size_hint: 0.2, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.25}
            on_press: root.manager.current = "new_task_recording_b" 


# ------------------- NEW PARTICIPANT REGISTRATION -------------------

<NewParticipantRegistratin_Screen>:
    FloatLayout:
        Label: # TITTLE
            text: 'NEW PARTICIPANT REGISTRATION'
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}
    
    FloatLayout:
        Image: #BACK ARROW BUTTON
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'start_page'
        
    GridLayout:
        cols: 2
        size_hint: 0.7, None
        height: self.minimum_height
        pos_hint: {'center_x': 0.5, 'center_y': 0.6}
        padding: 15
        spacing: 15

        # Participant Number
        Label:
            text: 'Participant number:'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: participant_id_input
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 30

        # Participant Group
        Label:
            text: 'Participant group:'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: participant_group_input
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 30

        # Question 1
        Label:
            text: 'Name:'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: name_input
            multiline: False
            hint_text: 'Type your name'
            size_hint_y: None
            height: 30

        # Question 2
        Label:
            text: 'Last Name:'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: lastname_input
            multiline: False
            hint_text: 'Type your last name'
            size_hint_y: None
            height: 30

        # Question 3
        Label:
            text: 'Age:'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: age_input
            multiline: False
            hint_text: 'Type your age'
            size_hint_y: None
            height: 30

        # Question 4
        Label:
            text: 'Genre:'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: genre_input
            multiline: False
            hint_text: 'Male / Female'
            size_hint_y: None
            height: 30

        # Question 5
        Label:
            text: 'Main Hand:'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: mainhand_input
            multiline: False
            hint_text: 'Left / Right'
            size_hint_y: None
            height: 30

        # Question 6
        Label:
            text: 'How many years have you played drums?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: years_playing_input
            multiline: False
            hint_text: 'Type a number'
            size_hint_y: None
            height: 30

        # Question 7
        Label:
            text: 'Have you received formal education in music (yes) or are you self-taught (no)?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: trainning_input
            multiline: False
            hint_text: 'Yes / No'
            size_hint_y: None
            height: 30

        # Question 8
        Label:
            text: 'How many hours do you practice drums per week? (Otherwise, type "0")'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: practice_hours_input
            multiline: False
            hint_text: 'Type a number'
            size_hint_y: None
            height: 30

        # Question 9
        Label:
            text: 'Are you familiar with drum rudiments?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: rudiments_familiarity_input
            multiline: False
            hint_text: 'Yes / No'
            size_hint_y: None
            height: 30

        # Question 10
        Label:
            text: 'In case you are familiar with rudiments, are they included in your practice routine?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: rudiments_in_routine_input
            multiline: False
            hint_text: 'Yes / No'
            size_hint_y: None
            height: 30

        # Question 11
        Label:
            text: 'In case they are included, how many hours per week do you practice rudiments? (Otherwise, type “0”)'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: rudiments_practice_hours_input
            multiline: False
            hint_text: 'Type a number'
            size_hint_y: None
            height: 30

    # Submit Button
    Button:
        text: 'SAVE'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.20}
        on_release:
            participant_id = participant_id_input.text
            participant_group = participant_group_input.text
            name = name_input.text
            lastname = lastname_input.text
            age = age_input.text
            genre = genre_input.text
            mainhand = mainhand_input.text
            years_playing = years_playing_input.text
            trainning = trainning_input.text
            practice_hours = practice_hours_input.text
            rudiments_familiarity = rudiments_familiarity_input.text
            rudiments_in_routine = rudiments_in_routine_input.text
            rudiments_practice_hours = rudiments_practice_hours_input.text
            app.submit_new_participant_form(participant_id, participant_group, name, lastname, age, genre, mainhand, years_playing, trainning, practice_hours, rudiments_familiarity, rudiments_in_routine, rudiments_practice_hours)
            app.clear_new_participant_form(participant_id_input, participant_group_input, name_input, lastname_input, age_input, genre_input, mainhand_input, years_playing_input, trainning_input, practice_hours_input, rudiments_familiarity_input, rudiments_in_routine_input, rudiments_practice_hours_input)


    # Go back to start page button
    Button:
        text: 'Go back to start page'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'start_page'
        background_color: 0, 0, 1, 1  # Blue color


# ------------------- NEW CONTROL FORM -------------------

<NewControlForm_Screen>:
    FloatLayout:
        Label: # TITTLE
            text: 'NEW CONTROL FORM'
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}
    
    FloatLayout:
        Image: #BACK ARROW BUTTON
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'start_page'

    GridLayout:
        cols: 2
        size_hint: 0.7, None
        height: self.minimum_height
        pos_hint: {'center_x': 0.5, 'center_y': 0.6}
        padding: 15
        spacing: 15

        # Participant Number
        Label:
            text: 'PARTICIPANT NUMBER:'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: participant_input
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 30

        # Session number
        Label:
            text: 'SESSION:'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: session_input
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 30

        # Question 1
        Label:
            text: 'How do you feel physically today?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: physical_state_input
            multiline: False
            hint_text: '1 (very poor) / 2 (poor) / 3 (average) / 4 (good) / 5 (very good)'
            size_hint_y: None
            height: 30

        # Question 2
        Label:
            text: 'How do you feel mentally today?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: mental_state_input
            multiline: False
            hint_text: '1 (very poor) / 2 (poor) / 3 (average) / 4 (good) / 5 (very good)'
            size_hint_y: None
            height: 30

        # Question 3
        Label:
            text: 'How much sleep did you get last night? (hours)'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: sleeping_hours_input
            multiline: False
            hint_text: 'Type a number'
            size_hint_y: None
            height: 30

        # Question 4
        Label:
            text: 'Do you have any physical pain or discomfort today?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: physical_pain_input
            multiline: False
            hint_text: 'Yes / No'
            size_hint_y: None
            height: 30

        # Question 5
        Label:
            text: 'How stressed do you feel right now?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: stress_input
            multiline: False
            hint_text: '1 (not at all) / 2 (very little) / 3 (a little) / 4 (quite a lot) 5 (a very great deal)'
            size_hint_y: None
            height: 30

        # Question 6
        Label:
            text: 'How motivated are you to perform today?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: motivation_input
            multiline: False
            hint_text: '1 (not at all) / 2 (very little) / 3 (a little) / 4 (quite a lot) 5 (a very great deal)'
            size_hint_y: None
            height: 30

        # Question 7
        Label:
            text: 'Have you consumed any caffeine today?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: caffeine_today_input
            multiline: False
            hint_text: 'Yes / No'
            size_hint_y: None
            height: 30

        # Question 7 B
        Label:
            text: 'If "Yes", please specify the amount equivalent to a cup of coffee (otherwise, type “0”)'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: caffeine_specification_input
            multiline: False
            hint_text: 'Type a number'
            size_hint_y: None
            height: 30

        # Question 8
        Label:
            text: 'Did you practice drums today before this session?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: practise_today_input
            multiline: False
            hint_text: 'Yes / No'
            size_hint_y: None
            height: 30

        # Question 8 B
        Label:
            text: 'If "Yes", please specify how many hours (otherwise, type “0”)'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: practise_today_specification_input
            multiline: False
            hint_text: 'Type a number'
            size_hint_y: None
            height: 30

        # Question 9
        Label:
            text: 'Have you practised the task rudiment since the last recording session?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: rudiment_practise_input
            multiline: False
            hint_text: 'Yes / No'
            size_hint_y: None
            height: 30

        # Question 9 B
        Label:
            text: 'If "Yes", please specify how many hours (otherwise, type “0”)'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: rudiment_practise_specification_input
            multiline: False
            hint_text: 'Type a number'
            size_hint_y: None
            height: 30

    # Submit Button
    Button:
        text: 'SAVE'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.20}
        on_release:
            participant = participant_input.text
            session = session_input.text
            physical_state = physical_state_input.text
            mental_state = mental_state_input.text
            sleeping_hours = sleeping_hours_input.text
            physical_pain = physical_pain_input.text
            stress = stress_input.text
            motivation = motivation_input.text
            caffeine_today = caffeine_today_input.text
            caffeine_specification = caffeine_specification_input.text
            practise_today = practise_today_input.text
            practise_today_specification = practise_today_specification_input.text
            rudiment_practise = rudiment_practise_input.text
            rudiment_practise_specification = rudiment_practise_specification_input.text
            app.submit_control_form(participant, session, physical_state, mental_state, sleeping_hours, physical_pain, stress, motivation, caffeine_today, caffeine_specification, practise_today, practise_today_specification, rudiment_practise, rudiment_practise_specification)
            app.clear_control_form(participant_input, session_input, physical_state_input, mental_state_input, sleeping_hours_input, physical_pain_input, stress_input, motivation_input, caffeine_today_input, caffeine_specification_input, practise_today_input, practise_today_specification_input, rudiment_practise_input, rudiment_practise_specification_input)

    # Go back to start page button
    Button:
        text: 'Go back to start page'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'start_page'
        background_color: 0, 0, 1, 1  # Blue color


# ------------------- NEW BASELINE RECORDING -------------------

<NewBaselineRecording_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'NEW BASELINE RECORDING'
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'start_page'

    # New Data Entry Form
    GridLayout:
        cols: 2
        size_hint: 0.45, None
        height: self.minimum_height
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        padding: 15
        spacing: 15

        # Participant Number
        Label:
            text: 'PARTICIPANT NUMBER:'
            font_size: '30sp'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: participant_number_input
            font_size: '20sp'
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 35

        # Session
        Label:
            text: 'SESSION:'
            font_size: '30sp'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: session_input
            font_size: '20sp'
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 35

        # Attempt
        Label:
            text: 'ATTEMPT:'
            font_size: '30sp'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: attempt_input
            font_size: '20sp'
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 35

        # Tempo value
        Label:
            text: 'TEMPO (BPM):'
            font_size: '30sp'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: tempo_input
            font_size: '20sp'
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 35


    # Submit Button
    Button:
        text: 'SAVE'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.20}
        on_release:
            app.form_handler.submit_data_entry_form(participant_number_input.text, session_input.text,tempo_input.text, attempt_input.text)
            app.form_handler.clear_data_entry_form(participant_number_input, session_input, tempo_input, attempt_input)


    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_baseline_recording_description'



<NewBaselineRecording_Description_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'TASK DESCRIPTION'
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_baseline_recording'

    # Description text and images 
    BoxLayout:
        orientation: 'vertical'
        size_hint: None, None
        size: self.parent.width * 0.9, self.parent.height * 0.6
        pos_hint: {'center_x': 0.5, 'top': 0.80}
        padding: 10
        spacing: 15

        Label:
            text: "Read the next instructions carefully. Please, do not hesitate to ask in case you have any doubts or questions."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Label:
            text: "During this task you will perform a “paradiddle” rudiment over a metronome track, that you will listen during the recording."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]
        
        Label:
            text: "This is the “paradiddle” pattern:"
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]
        
        Image:
            source: 'BehDrums/Images/paradiddle_pattern.png'
            allow_stretch: True
            keep_ratio: True
            size_hint_y: None
            height: dp(75)  # Adjust height as necessary

        Label:
            text: "You will play it over the middle central-lower drum pad, the one with the red circle in the following picture:"
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Image:
            source: 'BehDrums/Images/dtx12_pads_marked.png'
            allow_stretch: True
            keep_ratio: True
            size_hint_y: None
            height: dp(250)  # Adjust height as necessary

        Label:
            text: "Please, feel free to practise the rudiment pattern over this pad for a few seconds. Make sure you can listen a snare sound when you play it."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Label:
            text: "During the recording, the metronome will start at an initial low tempo and it will increase gradually until it reaches a peak, which will be maintained over some time. Then, the metronome will decelerate gradually to the initial tempo."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]
        
        Label:
            text: "The two first bars of the metronome consist of the count-in (pre-click). There will be a sign in the screen indicating the status of the count-in."
            bold: True
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Label:
            text: "In the next screen, the recording will start after the button RECORD is pressed. The recording will stop automatically when the metronome track stops."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Label:
            text: "Please, check that you can listen what you play on the drum pads, that the volume levels are suitable and everything so you are ready for recording. When you are ready, please press “Continue”."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]


    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_baseline_recording_record'



<NewBaselineRecording_Record_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'RECORDING SCREEN' 
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_baseline_recording_description'
    
    # Record Button
    Button:
        text: 'RECORD'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        on_release: app.run_recording_script_baseline()


    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_baseline_recording_self_reported_data'




<NewBaselineRecording_SelfReportedData_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'PERFORMANCE SELF-REPORTED DATA' 
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_baseline_recording_record'


    # Performance Self-Reported Data description
    BoxLayout:
        Label:
            text: 'Please, rate the following aspects of your performance during the recording. Use the next scale:'
            color: 0, 0, 0, 1  # Black color
            pos_hint: {'center_x': 0.5, 'center_y': 0.8}  

    BoxLayout:
        Label:
            text: '1 not at all, 2 very little, 3 a little, 4 quite a lot, 5 a very great deal'
            color: 0, 0, 0, 1  # Black color
            pos_hint: {'center_x': 0.5, 'center_y': 0.75}  

    # Performance Self-Reported Data form
    GridLayout:
        cols: 2
        size_hint: 0.7, None
        height: self.minimum_height
        pos_hint: {'center_x': 0.5, 'center_y': 0.6}
        padding: 15
        spacing: 15

        # Question 1: Comfort
        Label:
            text: 'How comfortable did you feel during the performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: comfort_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

        # Question 2: Control
        Label:
            text: 'How much control did you feel during the performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: control_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

        # Question 3: Focus
        Label:
            text: 'How focused did you feel during the performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: focus_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

        # Question 4: Challenge
        Label:
            text: 'How challenging did you feel the performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: challenge_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

        # Question 5: Satisfaction
        Label:
            text: 'How satisfied are you with your performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: satisfaction_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

    # Submit Button
    Button:
        text: 'SAVE'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.20}
        on_release:
            comfort = comfort_input.text
            control = control_input.text
            focus = focus_input.text
            challenge = challenge_input.text
            satisfaction = satisfaction_input.text
            app.submit_performance_self_reported_data_form_baseline(comfort, control, focus, challenge, satisfaction)
            app.clear_performance_self_reported_data_form_baseline(comfort_input, control_input, focus_input, challenge_input, satisfaction_input)

    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_baseline_recording_analyze'


<NewBaselineRecording_Analyze_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'PERFORMANCE ANALYSIS' 
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_baseline_recording_self_reported_data'
    
    # Analysis Button
    Button:
        text: 'ANALYZE'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        on_release: app.run_analysis_script_paradiddle()


    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_baseline_recording_results'



<NewBaselineRecording_Results_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'PERFORMANCE RESULTS' 
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_baseline_recording_analyze'

    # Performance results text
    FloatLayout:
        Label:
            text: 'Your performance accuracy was: ' 
            color: 0, 0, 0, 1  # Black color
            font_size: '70sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.7}    


    # Performance results percentage
    FloatLayout:
        Label:
            text: root.performance_result_baseline
            color: 0, 0, 0, 1  # Black color
            font_size: '130sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    # Show results button
    Button:
        text: 'Show Results'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.20}
        on_release: app.show_results_baseline()

    # Go back to "New Baseline Recording" button
    Button:
        text: 'Go back to New Baseline Recording'
        bold: True
        font_size: '20sp'
        size_hint: 0.2, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_baseline_recording'
        background_color: 0, 0, 1, 1  # Blue color



# ------------------- NEW TASK RECORDING A -------------------

<NewTaskRecording_A_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'NEW TASK RECORDING'
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}

    # Subtile (Group)
    FloatLayout:
        Label:
            text: '[ GROUP A ]'
            color: 0, 0, 0, 1  # Black color
            font_size: '40sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.88}
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'start_page'


    # New Data Entry Form
    GridLayout:
        cols: 2
        size_hint: 0.45, None
        height: self.minimum_height
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        padding: 15
        spacing: 15

        # Participant Number
        Label:
            text: 'PARTICIPANT NUMBER:'
            font_size: '30sp'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: participant_number_input
            font_size: '20sp'
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 35

        # Session
        Label:
            text: 'SESSION:'
            font_size: '30sp'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: session_input
            font_size: '20sp'
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 35

        # Attempt
        Label:
            text: 'ATTEMPT:'
            font_size: '30sp'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: attempt_input
            font_size: '20sp'
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 35

        # Tempo value
        Label:
            text: 'TEMPO (BPM):'
            font_size: '30sp'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: tempo_input
            font_size: '20sp'
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 35

    # Submit Button
    Button:
        text: 'SAVE'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.20}
        on_release:
            app.form_handler.submit_data_entry_form(participant_number_input.text, session_input.text,tempo_input.text, attempt_input.text)
            app.form_handler.clear_data_entry_form(participant_number_input, session_input, tempo_input, attempt_input)
   

    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_task_recording_a_description'


<NewTaskRecording_A_Description_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'TASK DESCRIPTION'
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_task_recording_a'

    # Description text and images 
    BoxLayout:
        orientation: 'vertical'
        size_hint: None, None
        size: self.parent.width * 0.9, self.parent.height * 0.6
        pos_hint: {'center_x': 0.5, 'top': 0.80}
        padding: 10
        spacing: 15

        Label:
            text: "Read the next instructions carefully. Please, do not hesitate to ask in case you have any doubts or questions."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Label:
            text: "During this task you will perform a “flam paradiddle” rudiment over a metronome track, that you will listen during the recording."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]
        
        Label:
            text: "This is the “flam paradiddle” pattern:"
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]
        
        Image:
            source: 'BehDrums/Images/flamparadiddle_pattern.png'
            allow_stretch: True
            keep_ratio: True
            size_hint_y: None
            height: dp(75)  # Adjust height as necessary

        Label:
            text: "You will play it over the middle central-lower drum pad, the one with the red circle in the following picture:"
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Image:
            source: 'BehDrums/Images/dtx12_pads_marked.png'
            allow_stretch: True
            keep_ratio: True
            size_hint_y: None
            height: dp(250)  # Adjust height as necessary

        Label:
            text: "Please, feel free to practise the rudiment pattern over this pad for a few seconds. Make sure you can listen a snare sound when you play it."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Label:
            text: "During the recording, the metronome will start at an initial low tempo and it will increase gradually until it reaches a peak, which will be maintained over some time. Then, the metronome will decelerate gradually to the initial tempo."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]
        
        Label:
            text: "The two first bars of the metronome consist of the count-in (pre-click). There will be a sign in the screen indicating the status of the count-in."
            bold: True
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Label:
            text: "In the next screen, the recording will start after the button RECORD is pressed. The recording will stop automatically when the metronome track stops."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Label:
            text: "Please, check that you can listen what you play on the drum pads, that the volume levels are suitable and everything so you are ready for recording. When you are ready, please press “Continue”."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]


    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_task_recording_a_record'


<NewTaskRecording_A_Record_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'RECORDING SCREEN' 
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_task_recording_a_description'
    
    # Record Button
    Button:
        text: 'RECORD'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        on_release: app.run_recording_script_task()


    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_task_recording_a_self_reported_data'


<NewTaskRecording_A_SelfReportedData_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'PERFORMANCE SELF-REPORTED DATA' 
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_task_recording_a_record'


    # Performance Self-Reported Data description
    BoxLayout:
        Label:
            text: 'Please, rate the following aspects of your performance during the recording. Use the next scale:'
            color: 0, 0, 0, 1  # Black color
            pos_hint: {'center_x': 0.5, 'center_y': 0.8}  

    BoxLayout:
        Label:
            text: '1 not at all, 2 very little, 3 a little, 4 quite a lot, 5 a very great deal'
            color: 0, 0, 0, 1  # Black color
            pos_hint: {'center_x': 0.5, 'center_y': 0.75}  

    # Performance Self-Reported Data form
    GridLayout:
        cols: 2
        size_hint: 0.7, None
        height: self.minimum_height
        pos_hint: {'center_x': 0.5, 'center_y': 0.6}
        padding: 15
        spacing: 15

        # Question 1: Comfort
        Label:
            text: 'How comfortable did you feel during the performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: comfort_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

        # Question 2: Control
        Label:
            text: 'How much control did you feel during the performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: control_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

        # Question 3: Focus
        Label:
            text: 'How focused did you feel during the performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: focus_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

        # Question 4: Challenge
        Label:
            text: 'How challenging did you feel the performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: challenge_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

        # Question 5: Satisfaction
        Label:
            text: 'How satisfied are you with your performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: satisfaction_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

    # Submit Button
    Button:
        text: 'SAVE'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.20}
        on_release:
            comfort = comfort_input.text
            control = control_input.text
            focus = focus_input.text
            challenge = challenge_input.text
            satisfaction = satisfaction_input.text
            app.submit_performance_self_reported_data_form_task(comfort, control, focus, challenge, satisfaction)
            app.clear_performance_self_reported_data_form_task(comfort_input, control_input, focus_input, challenge_input, satisfaction_input)

    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_task_recording_a_analyze'

<NewTaskRecording_A_Analyze_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'PERFORMANCE ANALYSIS' 
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_task_recording_a_self_reported_data'
    
    # Analysis Button
    Button:
        text: 'ANALYZE'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        on_release: app.run_analysis_script_flamparadiddle()


    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_task_recording_a_prediction'


<NewTaskRecording_A_Prediction_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'PERFORMANCE PREDICTION' 
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_task_recording_a_analyze'

    # Performance prediction question
    FloatLayout:
        Label:
            text: 'How accurate do you think your performance was?' 
            color: 0, 0, 0, 1  # Black color
            font_size: '60sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.7}    

    # Performance prediction question description
    FloatLayout:
        Label:
            text: 'Please, write your prediction score as a percentage in the next form:' 
            color: 0, 0, 0, 1  # Black color
            font_size: '40sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}    


    # Performance prediction form
    GridLayout:
        cols: 2
        size_hint: 0.25, 0.2
        height: self.minimum_height
        pos_hint: {'center_x': 0.5, 'center_y': 0.4}
        padding: 10
        spacing: 10

        TextInput:
            id: prediction_input
            multiline: False
            hint_text: '00.00'
            font_size: 80
            size_hint_y: None
            height: 100

        Label:
            text: '%'
            color: 0, 0, 0, 1
            font_size: 100
            size_hint_y: None
            height: 100

    # Submit Button
    Button:
        text: 'SAVE'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.20}
        on_release:
            prediction = prediction_input.text
            app.submit_prediction_form(prediction)
            app.clear_prediction_form(prediction_input)

    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_task_recording_a_results'


<NewTaskRecording_A_Results_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'PERFORMANCE RESULTS' 
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_task_recording_a_prediction'

    # Performance results text
    FloatLayout:
        Label:
            text: 'Your performance accuracy was: ' 
            color: 0, 0, 0, 1  # Black color
            font_size: '70sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.7}    

    # Performance results percentage
    FloatLayout:
        Label:
            text: root.performance_result_task_a
            color: 0, 0, 0, 1  # Black color
            font_size: '130sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    # Show results button
    Button:
        text: 'Show Results'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.20}
        on_release: app.show_results_task_a() 


    # Go back to "New Baseline Recording" button
    Button:
        text: 'Go back to New Task Recording A'
        bold: True
        font_size: '20sp'
        size_hint: 0.2, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_task_recording_a'
        background_color: 0, 0, 1, 1  # Blue color




# ------------------- NEW TASK RECORDING B -------------------

<NewTaskRecording_B_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'NEW TASK RECORDING'
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}

    # Subtile (Group)
    FloatLayout:
        Label:
            text: '[ GROUP B ]'
            color: 0, 0, 0, 1  # Black color
            font_size: '40sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.88}
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'start_page'


    # New Data Entry Form
    GridLayout:
        cols: 2
        size_hint: 0.45, None
        height: self.minimum_height
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        padding: 15
        spacing: 15

        # Participant Number
        Label:
            text: 'PARTICIPANT NUMBER:'
            font_size: '30sp'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: participant_number_input
            font_size: '20sp'
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 35

        # Session
        Label:
            text: 'SESSION:'
            font_size: '30sp'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: session_input
            font_size: '20sp'
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 35

        # Attempt
        Label:
            text: 'ATTEMPT:'
            font_size: '30sp'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: attempt_input
            font_size: '20sp'
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 35

        # Tempo value
        Label:
            text: 'TEMPO (BPM):'
            font_size: '30sp'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: tempo_input
            font_size: '20sp'
            multiline: False
            hint_text: 'TO BE COMPLETED BY THE RESEARCHER'
            size_hint_y: None
            height: 35

    # Submit Button
    Button:
        text: 'SAVE'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.20}
        on_release:
            app.form_handler.submit_data_entry_form(participant_number_input.text, session_input.text,tempo_input.text, attempt_input.text)
            app.form_handler.clear_data_entry_form(participant_number_input, session_input, tempo_input, attempt_input)


    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_task_recording_b_description'


<NewTaskRecording_B_Description_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'TASK DESCRIPTION'
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_task_recording_b'

    # Description text and images 
    BoxLayout:
        orientation: 'vertical'
        size_hint: None, None
        size: self.parent.width * 0.9, self.parent.height * 0.6
        pos_hint: {'center_x': 0.5, 'top': 0.80}
        padding: 10
        spacing: 15

        Label:
            text: "Read the next instructions carefully. Please, do not hesitate to ask in case you have any doubts or questions."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Label:
            text: "During this task you will perform a “flam paradiddle” rudiment over a metronome track, that you will listen during the recording."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]
        
        Label:
            text: "This is the “flam paradiddle” pattern:"
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]
        
        Image:
            source: 'BehDrums/Images/flamparadiddle_pattern.png'
            allow_stretch: True
            keep_ratio: True
            size_hint_y: None
            height: dp(75)  # Adjust height as necessary

        Label:
            text: "You will play it over the middle central-lower drum pad, the one with the red circle in the following picture:"
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Image:
            source: 'BehDrums/Images/dtx12_pads_marked.png'
            allow_stretch: True
            keep_ratio: True
            size_hint_y: None
            height: dp(250)  # Adjust height as necessary

        Label:
            text: "Please, feel free to practise the rudiment pattern over this pad for a few seconds. Make sure you can listen a snare sound when you play it."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Label:
            text: "During the recording, the metronome will start at an initial low tempo and it will increase gradually until it reaches a peak, which will be maintained over some time. Then, the metronome will decelerate gradually to the initial tempo."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]
        
        Label:
            text: "The two first bars of the metronome consist of the count-in (pre-click). There will be a sign in the screen indicating the status of the count-in."
            bold: True
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Label:
            text: "In the next screen, the recording will start after the button RECORD is pressed. The recording will stop automatically when the metronome track stops."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]

        Label:
            text: "Please, check that you can listen what you play on the drum pads, that the volume levels are suitable and everything so you are ready for recording. When you are ready, please press “Continue”."
            color: 0, 0, 0, 1  # Black color
            size_hint_y: None
            height: self.texture_size[1]


    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_task_recording_b_record'


<NewTaskRecording_B_Record_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'RECORDING SCREEN' 
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_task_recording_b_description'
    
    # Record Button
    Button:
        text: 'RECORD'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        on_release: app.run_recording_script_task()


    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_task_recording_b_self_reported_data'


<NewTaskRecording_B_SelfReportedData_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'PERFORMANCE SELF-REPORTED DATA' 
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_task_recording_a_record'


    # Performance Self-Reported Data description
    BoxLayout:
        Label:
            text: 'Please, rate the following aspects of your performance during the recording. Use the next scale:'
            color: 0, 0, 0, 1  # Black color
            pos_hint: {'center_x': 0.5, 'center_y': 0.8}  

    BoxLayout:
        Label:
            text: '1 not at all, 2 very little, 3 a little, 4 quite a lot, 5 a very great deal'
            color: 0, 0, 0, 1  # Black color
            pos_hint: {'center_x': 0.5, 'center_y': 0.75}  

    # Performance Self-Reported Data form
    GridLayout:
        cols: 2
        size_hint: 0.7, None
        height: self.minimum_height
        pos_hint: {'center_x': 0.5, 'center_y': 0.6}
        padding: 15
        spacing: 15

        # Question 1: Comfort
        Label:
            text: 'How comfortable did you feel during the performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: comfort_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

        # Question 2: Control
        Label:
            text: 'How much control did you feel during the performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: control_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

        # Question 3: Focus
        Label:
            text: 'How focused did you feel during the performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: focus_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

        # Question 4: Challenge
        Label:
            text: 'How challenging did you feel the performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: challenge_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

        # Question 5: Satisfaction
        Label:
            text: 'How satisfied are you with your performance?'
            color: 0, 0, 0, 1  # Black color
            halign: 'left'
            width: self.texture_size[0]
        TextInput:
            id: satisfaction_input
            multiline: False
            hint_text: '1 / 2 / 3 / 4 / 5'
            size_hint_y: None
            height: 30

    # Submit Button
    Button:
        text: 'SAVE'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.20}
        on_release:
            comfort = comfort_input.text
            control = control_input.text
            focus = focus_input.text
            challenge = challenge_input.text
            satisfaction = satisfaction_input.text
            app.submit_performance_self_reported_data_form_task(comfort, control, focus, challenge, satisfaction)
            app.clear_performance_self_reported_data_form_task(comfort_input, control_input, focus_input, challenge_input, satisfaction_input)

    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_task_recording_b_results'





<NewTaskRecording_B_Analyze_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'PERFORMANCE ANALYSIS' 
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_task_recording_b_self_reported_data'
    
    # Analysis Button
    Button:
        text: 'ANALYZE'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        on_release: app.run_analysis_script_flamparadiddle()


    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_task_recording_a_results'



<NewTaskRecording_B_Results_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'PERFORMANCE RESULTS' 
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_task_recording_b_self_analyze'

    # Performance results text
    FloatLayout:
        Label:
            text: 'Your performance accuracy was: ' 
            color: 0, 0, 0, 1  # Black color
            font_size: '70sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.7}    

    # Performance results percentage
    FloatLayout:
        Label:
            text: root.performance_result_task_b
            color: 0, 0, 0, 1  # Black color
            font_size: '130sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    # Show results button
    Button:
        text: 'Show Results'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.20}
        on_release: app.show_results_task_b() 

    # Gontinue Button
    Button:
        text: 'Continue'
        bold: True
        font_size: '20sp'
        size_hint: 0.15, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_task_recording_b_prediction'



<NewTaskRecording_B_Prediction_Screen>:
    # Title
    FloatLayout:
        Label:
            text: 'PERFORMANCE PREDICTION' 
            color: 0, 0, 0, 1  # Black color
            font_size: '50sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.95}    
    
    # Back Arrow Button
    FloatLayout:
        Image:
            source: 'BehDrums/Images/left-black-arrow.png'
            size_hint: None, None
            size: self.parent.width * 0.05, self.parent.height * 0.05
            allow_stretch: True
            keep_ratio: True
            pos_hint: {'x': 0, 'top': 0.99}
            on_touch_down: if self.collide_point(*args[1].pos): app.root.current = 'new_task_recording_b_results'

    # Performance prediction question
    FloatLayout:
        Label:
            text: 'How accurate do you think your performance was?' 
            color: 0, 0, 0, 1  # Black color
            font_size: '60sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.7}    

    # Performance prediction question description
    FloatLayout:
        Label:
            text: 'Please, write your prediction score as a percentage in the next form:' 
            color: 0, 0, 0, 1  # Black color
            font_size: '40sp'
            bold: True
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}    


    # Performance prediction form
    GridLayout:
        cols: 2
        size_hint: 0.25, 0.2
        height: self.minimum_height
        pos_hint: {'center_x': 0.5, 'center_y': 0.4}
        padding: 10
        spacing: 10

        TextInput:
            id: prediction_input
            multiline: False
            hint_text: '00.00'
            font_size: 80
            size_hint_y: None
            height: 100

        Label:
            text: '%'
            color: 0, 0, 0, 1
            font_size: 100
            size_hint_y: None
            height: 100

    # Submit Button
    Button:
        text: 'SAVE'
        bold: True
        font_size: '30sp'
        size_hint: 0.2, 0.1
        pos_hint: {'center_x': 0.5, 'center_y': 0.20}
        on_release:
            prediction = prediction_input.text
            app.submit_prediction_form(prediction)
            app.clear_prediction_form(prediction_input)


    # Go back to "New Baseline Recording" button
    Button:
        text: 'Go back to New Task Recording B'
        bold: True
        font_size: '20sp'
        size_hint: 0.2, 0.05
        pos_hint: {'center_x': 0.5, 'center_y': 0.10}
        on_press: root.manager.current = 'new_task_recording_b'
        background_color: 0, 0, 1, 1  # Blue color

